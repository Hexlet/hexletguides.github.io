---
layout: post
title: Что такое виртуализация?
subtitle: Заголовок
summary: Саммари
cover_url: "/images/virtualization/virtualization_cover.png"
---

У пользователей Linux или Mac иногда возникает потребность в запуске программ, работающих только в Windows, а у Windows-пользователей, особенно программистов, потребность в запуске Linux или другой версии Windows. Классический пример — игры или Photoshop. 

Самый очевидный способ сделать это — купить второй компьютер, но это дорогое удовольствие. Второй вариант - поставить Windows рядом со своей основной операционной системой. Такая установка, как правило, может все сломать, но если у вас получилось, во время старта компьютера вы сможете выбрать операционную систему для загрузки. Но существует третий путь — **виртуализация**.

### Виртуализация

Идея виртуализации довольно проста. Вместо установки на голое железо, специальная программа (гипервизор) позволяет установить ОС на виртуальную машину.

*Виртуализация позволяет запускать операционную систему как обычную программу на вашем компьютере!* 

ОС, внутри которой стартует другая ОС, называется хост-системой, (host) а ОС которая работает в виртуальном окружении — гостевой (guest).

Гипервизор — довольно сложное программное обеспечение, в задачу которого входит создание виртуальных машин и управление ими. Он обеспечивает изоляцию операционных систем друг от друга, защиту и безопасность, разделение ресурсов между запущенными ОС и управление ресурсами.

Виртуальная машина — это окружение, которое представляется для гостевой операционной системы как аппаратное. Однако, на самом деле это программное окружение, которое эмулируется программным обеспечением хостовой системы. 

Такая установка абсолютно безопасна, в любой момент можно все снести и переустановить. Вы можете создать столько виртуальных машин, сколько нужно. Правда, запускать их все сразу не стоит. Каждая виртуальная машина получит столько ресурсов, сколько вы укажете. Этим фактом особенно пользуются хостеры (компании, предоставляющие услуги веб-хостинга). Фактически на каждого пользователя создается своя собственная виртуальная машина с квотами, соответствующими выбранному тарифу (ограничения по памяти, процессору и так далее). 

Кроме того, виртуализация изолирует машины друг от друга, а значит вам не придется переживать, если пользователи попытаются навредить системе или соседним пользователям. Подобная услуга обычно называется VPS (virtual private server) и в базовой комплектации стоит дешево. 

Виртуальные машины позволяют эффективнее утилизировать (использовать) ресурсы железной машины. Как правило, далеко не всем пользователям нужна мощность того железа, которое стоит у хостера, да и платить за нее он не готов. А вот виртуальная машина может съедать лишь проценты от мощности железа, что позволяет на одной машине размещать десятки клиентов (а то и больше). Получается, что и пользователь доволен, и хостер заработал свои деньги.

Самих способов виртуализации операционной системы существует несколько. Все они глобально делятся на две большие группы: **аппаратная** и **программная** виртуализация. 

Как ясно из названия, аппаратная виртуализация работает благодаря поддержки со стороны железа — процессора. В отличие от программной виртуализации, гостевые операционные системы управляются гипервизором напрямую без участия хостовой ОС. Аппаратная виртуализация гораздо эффективнее программной, так как гипервизор, в отличие от хостовой ОС, создает очень небольшой оверхед (overhead, накладные расходы). Программная виртуализация, в свою очередь, делится на несколько подтипов, о которых подробнее можно прочитать в [Википедии](https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F).

Особняком стоит так называемая **контейнерная виртуализация**. В отличие от предыдущих видов, она не связана с запуском ОС в изолированном окружении. При контейнерной виртуализации изоляция происходит на уровне процесса операционной системы. На текущий момент такой вид виртуализации существует только в Linux и доступен благодаря двум возможностям ядра: cgroups и namespaces. Они позволяют запускать всего лишь один процесс так, как будто он выполняется в своем собственном мире, со своей сетью, своим диском, своей файловой системой и так далее. При таком виде виртуализации происходит запуск процесса в **той же операционной системе и на том же ядре**, а значит вы не можете с помощью нее в Linux запустить Windows. Эту виртуализацию применяют на уровне сервисов, составляющих части программного продукта. Наиболее известные проекты: OpenVZ, Docker, LXC.

---

*Кирилл Мокевнин*
