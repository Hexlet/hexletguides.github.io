---
layout: post
title: Зачем использовать VIM
subtitle: Философия и порядок изучения
summary: VIM не похож ни на один другой редактор. Что в нем такого особенного и почему его стоит изучать.
cover_url: "Путь к файлу-обложке для соц. сетей, например, /images/vscode_eslint.png"
---

**VI(M) текстовый редактор, который появился в далеком 1991 году, но сих пор пользуется огромной популярностью (наряду с emacs). Как правило на него переходят после других редакторов уже состоявшиеся разработчики. Нередко с полноценных IDE. Возникает вопрос: почему?**

В этом гайде не будет пошагового обучения виму. Его цель объяснить философию vim и причины его популярности, а также дать направление для дальнейшего обучения виму.

### Различия редакторов

В современном мире есть из чего выбрать среди редакторов: Sublime Text, Atom, VS Code, Brackets и это не считая IDE. Все они не лишены недостатков, но с точки зрения возможностей наворочены по максимуму. Между собой редакторы сравнивают по следующим характеристикам:

* Скорость работы. Хотя ее ставят превыше всего, практика показывает что программисты готовы страдать ради продвинутых возможностей.
* Возможности по редактированию текста, например мультикурсоры или сплиты.
* Наличие большого числа разнообразных плагинов включающих поддержку языков и инструментов.
* Интеграции, такие как git, терминалы и другое.

При таком способе сравнения, vim выглядит достаточно бледно на фоне других редакторов. Да он самый быстрый, но количество и качество плагинов явно уступает, а интеграций и вовсе нет, хотя, с другой стороны, многие из них не нужны в мире вима либо ставятся как плагины. Кроме всего прочего, обычный vim (а есть еще gvim) - терминальная программа со всеми вытекающими. Мышка хоть и поддерживается, но работать используя ее в виме сомнительное удовольствие. Например скроллинг двигается рывками, так как в текстовом терминале смещение построчное.

И завершает картину кривая обучения. У вима она даже круче чем у emacs. Чтобы научиться им пользоваться, придется в буквальном смысле страдать (но недолго если правильно учиться).

### Чужой среди своих

Так почему же вим?

Если слепой десятипальцевый метод печатания создан для эффективного набора текста, то вим создан для слепого десятипальцевого редактирования текста.

Вим предлагает другой взгляд на способ работы с текстом. Вместо горячих клавиш + мышка + "перемещение стрелками", вим вводит понятие *режимы*. По умолчанию, открыв редактор, мы попадаем в режим *normal*. В этом режиме вся клавиатура действует как приборная панель, набор текста в этом режиме невозможен. Его основная задача, использовать клавиатуру для перемещения по тексту и выполнение модификаций с помощью команд. В отличие от горячих клавиш, все команды короткие и нередко составные, причем нажатие составных команд всегда последовательное, а не одновременное как в горячих клавишах.

Приведу несколько примеров:

* `w` - переместиться на слово вперед
* `W` - перемещаться вперед по пробелам
* `b` - переместиться назад
* `B` - перемещаться назад по пробелам
* `dd` - удалить строку
* `diw` - удалить слово, которое находится под курсором
* `daw` - удалить слово, которое находится под курсором вместе с окружением (все кроме пробелов, например кавычки)
* `gg` - переместиться в начало документа
* `/` - начинет поиск, все что вводится далее ищется в отрытом файле (плюс есть команды для перемещения вперед назад по найденному)

А вот например более интересная команда - `r` нажав ее, редактор ожидает следующего символа. Затем, когда он будет введен, редактор заменяет символ под курсором на тот что был введен. Нетрудно догадаться что `r` означает `replace`. Подобных команд в виме не одна сотня. И многие из них могут комбинироваться в довольно сложные цепочки, буквально позволяя творить чудеса.

Сама система команд, при этом, выстраивается в логичную систему, где все имеет смысл и находится на своем месте. Причем не только с точки зрения обозначений (i - inner, a - around и так далее), но и с точки зрения расположения на клавиатуре. Из этого, кстати, следует интересный вывод. Если ваша раскладка не qwerty, то вся клавиатура "поедет" и пользоваться вимом станет невыносимо больно.

Отдельного упоминания заслуживает перемещение по тексту. В виме все перемещения делаются набором клавиш `hjkl`. Вы должно быть удивлены что эти клавиши расположены в одну строчку. Но как показывает практика, к такой системе привыкаешь крайне быстро и потом везде пытаешься перемещаться таким же способом.

Но для полноценной работы одного режима *normal* недостаточно. Для перехода в режим редактирования *insert*, существует более 6 способов! Например ввод команды `i` приводит к тому что ввод начинается прямо в том месте где стоит курсор, а `shift + a` перемещает курсор в конце строки (нужно довольно часто), в свою очередь `cc` стирает ту строчку где находится курсор и входит в режим редактирования. Для выхода из режима вставки в нормальный режим, достаточно нажать ESC. Кроме этих двух у vim есть режим *visual*, который похож на normal, но используется исключительно для выделения текста.

Мощь режима *normal* вы можете оценить хотя бы по тому, что абсолютно в каждом популярном редакторе есть плагин эмулирющий работу VIM и, как правило, это самый популярный плагин с огромным отрывом от всех остальных. Например плагин в VS Code установили более миллиона раз.

Другой, не менее интересный, а для многих возможно шокирующий пример популярности этого режима, программное обеспечение вокруг нас. Gmail поддерживает перемещение как в vim прямо в веб интерфейсе, Github тоже (попробуйте на странице любого репозитория набрать вопросительный знак). В каждом браузере существует популярный плагин, позволяющий перемещаться по загруженным страницам в вим стиле. Все пейджеры, такие как less или more также используют навигацию портированную из вима, соответственно и все программы использующие пейджеры, например `git log` (и другие команды git). Даже в bash достаточно набрать `set -o vi`, как командная строка превращается в vi (без m). Кстати, по умолчанию, в bash режим emacs с горячими клавишами из этого редактора.

Наличие режимов ключевая, но не единственная причина. Вторая, не менее важная - буферы. Опять же проще начать с сравнения. В обычных редакторах, есть четкое разграничение на табы с файлами и другие панели, такие как "файловое дерево", "встроенный терминал", "окно вывода ошибок", "окно конфигурации", "окно дебага" и так далее. Все эти сущности живут своей жизнью. У них свои правила работы и отображения, свой набор горячих клавиш и способ перемещения внутри них (если это вообще возможно).

В виме, любой кусок редактора открытый в свой собственной рамке - всего лишь текстовый буфер независимо от того как он используется. Автоматически это означает единый способ взаимодействия с этими буферами. Например упоминавшийся выше `/` поиск прекрасно работает в любой части редактора. Тоже самое касается перемещения используя `hjkl`. Содержимое такого буфера можно копировать стандартными средствами как целиком так и по выделению, его можно закрыть через команду предназначенную для закрытия буфера (опять же независимо от его внутренней структуры). Можно даже открыть больше буферов чем места на рабочей области. Одни буферы могут спокойно перекрывать другие, что не помешает переключению между ними. Буферы настолько удобны, что несмотря на наличие табов (вкладок) в вим, пользуются ими крайне редко.

Еще одно внезапное преимущество появляется из-за текстовой природы самого редактора. Так как он открывается прямо во вкладках терминала, а продвинутые терминалы имеют такую возможность как split окна, то интеграция терминаал внутрь vim особо не нужна и с помощью комбинации вкладок терминалов и вима можно очень удобно настроить рабочий процесс.

### Цена

Возможности, описанные выше, не даются бесплатно. Существуют определенные пререквизиты. Главный из которых слепая десятипальцевая печать. Опыт показывает, что если программист печатает в слепую, но не по десятипальцевой схеме, то он либо вообще не может адаптироваться, либо постоянно испытывает дискомофрт. Про тех кто не печатает в слепую можно даже не упоминать. Как правило, люди печатающие правильно, настолько ценят возможность не смещать руки относительно центральной позиции (Смещение руки на стрелки для них доставляет физический дискомфорт и неприятие.), что вим становится для них настоящим праздником. Вся система команд идеально ложится на соответствующую концепцию.

Но и здесь есть подоводные камни. В те времена когда появился vim, клавиатура выглядела по другому. И в том месте где сейчас caps lock и tab, были ctrl и esc. Последние используются в виме на полную катушку. Если ничего дополнительно не предпринимать, то придется очень серьезно выламывать себе руки (попутно зарабатывая себе туннельный синдром). Поэтому первое что делают вимеры, переключают ctrl на caps lock, а для esc пользуются либо стандартной кобминацией <bkg>ctrl + [</bkg>, которая легко дается с перемещенным ctrl для тех кто хорошо владеет слепым десятипальцевым методом, либо используют комбинацию `jj`, которую определяют самостоятельно.

---

*Кирилл Мокевнин*
