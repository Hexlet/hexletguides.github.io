---
title: Что такое интерпретатор?
# subtitle:
description: Зачем нужны интерпретаторы? Причины появления интерпретаторов. Как устроены интерпретаторы? На эти вопросы поможет ответить этот гайд.
# image: "assets/images/compiler/compiler.jpg"
author: Марк Шевченко
---

В этом гайде мы узнаем, что такое интерпретатор, для чего он нужен, и как работает. Этот материал поможет вам разобраться, как компьютер выполняет ваши программы.

## Зачем нужен интерпретатор?

В переводе с английского языка компьютер означает *вычислитель*. Мы привыкли к тому, что компьютер помогает нам готовить документы, читать новости и смотреть ролики. Нам редко приходится что-то вычислять, поэтому такое название кажется странным.

Вместе с тем это название очень точно отражает природу компьютера. Мы этого не видим, но на самом деле компьютер умеет работать только с числами. И документы, и новости, и ролики выглядят для компьютера как наборы чисел.

Точно также выглядят для него и программы, которые он выполняет.

Каждая команда имеет свой числовой — машинный — код, так что компьютер без труда понимает, что нужно делать. Человеку трудно писать программы в машинных кодах. На заре компьютерной эры первые программисты кодировали программы вручную и, естественно, хотели облегчить свою работу.

Они придумали языки программирования, которые очень похожи на человеческие. Писать программы на таком языке гораздо проще, потому что он понятен человеку. Но тут есть одна сложность: если компьютер понимает команды только в виде чисел, как он будет выполнять команды, написанные на языке программирования? Здесь нам на помощь и приходят интерпретаторы.

*Интерпретатор* — это такая программа, которая понимает и выполняет команды, написанные на языке программирования.

## Экскурс в историю

Самый первый интерпретатор был написан в машинных кодах, потому что тогда не было другого способа писать программы. Это случилось в 1958 году. Первым интерпретируемым языком программирования был Lisp. Удивительно, но диалекты этого языка используются программистами до сих пор.

Есть интерпретаторы для таких популярных языков программирования, как Python и JavaScript. Они хорошо подходят не только для работы, но и для того, чтобы изучать программирование. Немаловажную роль в этом играет то, что для них существует интерпретаторы, и чуть позже мы узнаем, почему это так.

## Пример интерпретатора Python

Попробуем вычислить сумму чисел от 1 до 100 с помощью программы на языке Python. Сначала запустим интерпретатор:

```
> python
Python 3.9.7
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

Интерпретатор выводит небольшую подсказку и ожидает ввода команд.

```python
sum = 0
for i in range(1, 101):
  sum = sum + i
print(sum) # => 5050
```

Мы вводим команды по одной и интерпретатор немедленно их выполняет. Всякий раз он печатает приглашение для ввода следующей команды.

Выполнив команды, интерпретатор сразу печатает результат. Сумма чисел от 1 до 100 равна 5050.
Если мы допустим ошибку, интерпретатор подскажет нам, что не может распознать команду и укажет возможную причину.

```
>>> for i in range(1, 101)
    for i in range(1, 101)
                          ^
Синтаксическая ошибка: пропущен символ ":"
>>>
```

В этом примере мы забыли поставить двоеточие после инструкции `for`.

Немедленный отклик интерпретатора очень удобен для изучения языка. Новички, видя сообщениях об ошибках и пробуя разные варианты, быстро осваивают незнакомый синтаксис. Именно поэтому такие языки, как Python и JavaScript, часто используют для обучения.

Опытные программисты также ценят такой — интерактивный — способ разработки, потому что он помогает быстро проверять свои идеи, поэтому интерпретируемые языки часто используют, чтобы разрабатывать прототипы больших программ. 

Интерпретатор в интерактивном режиме постоянно выполняет одни и те же действия. Он читает команду программиста, выполняет её и, наконец, печатает результат. Такой режим называют *Циклом Чтения-Выполнения-Печати*, или, по-английски *Read-Evaluate-Print Loop*. Обычно это название сокращают до аббревиатуры REPL.

![Цикл Чтения-Выполнения-Печати](/assets/images/interpreter/repl.png)

## Пример интерпретатора JavaScript

Интерпретатор JavaScript встроен прямо в наш браузер. Посмотрим, как он работает, на примере браузера Chrome.

В правом верхнем углу есть три вертикальные точки, которые вызывают меню браузера. Нажмите и выберите пункт меню *Дополнительные инструменты*, а затем *Инструменты разработчика*.

![Инструменты разработчика Chrome](/assets/images/interpreter/chrome-dev-tools.png)

После этого вы увидите новое окно в браузере, плотно заполненное вкладками. Всё это полезные инструменты, которые вам предстоит освоить. Но сейчас нам нужна одна вкладка — *Console*.
Здесь мы можем набирать команды языка JavaScript и сразу видеть отклик интерпретатора.
Введём команды:

```javascript
a = 1; // => 1
b = 2; // => 2
3 * (a + b); // => 9
```

Интерпретатор сохранит переменные `a` и `b` со значениями 1 и 2, затем вычислит значение `3 * (a + b)` и напечатает результат 9.

![Консоль Chrome](/assets/images/interpreter/chrome-console.png)

## Выполнение программы

Цикл чтения-выполнения-печати помогает разрабатывать программу, но, в конечном итоге мы не хотим каждый раз вводить наши команды.,

Мы хотим ввести их один раз и потом просто запускать готовую программу. Создадим текстовый файл *sum<span>.</span>py* и запишем там наши команды:

```python
sum = 0

for i in range(1, 101):
  sum = sum + i

print(sum)
```

Чтобы её выполнить, достаточно запустить интерпретатор Python, указав имя файла в параметрах:

```
> python sum.py
5050
```

Интерпретатор выполняет команды одну за одной и в конце завершает свою работу. Такой режим работы интерпретатора иногда называют *пакетным*.

## Устройство интерпретатора

Есть много способов написать интерпретатор. Мы не будем рассматривать все возможные варианты, а расскажем об устройстве интерпретаторов в целом. Обычный язык программирования содержит несколько десятков команд. В программе на Python, которую мы обсуждали выше есть операторы присваивания, цикл `for` и вызов функции `print`. Всё это — команды, которые понимает интерпретатор Python.

Для каждой команды в интерпретаторе есть блок кода, который умеет такую команду исполнять.
Вторая важная составляющая интерпретатора — анализатор текста. Когда программист вводит текст, анализатор разбирает его на составные части, и понимает, о какой команде идёт речь. После этого он передаёт управление блоку, отвечающему за выполнение этой команды.

Так — в цикле — интерпретатор и работает. Анализирует введённую команду, затем выполняет, снова анализирует, и снова выполняет. Анализ текста это, конечно, не тривиальная задача, но и не слишком трудная, так что интерпретаторы в действительности не такие уж и сложные программы.

![Как работает интерпретатор](/assets/images/interpreter/how-it-works.png)

## Достоинства и недостатки

Благодаря интерпретаторам, мы можем программировать не в машинных кодах, а на понятных языках,  которые легко выучить. Два важных плюса интерпретаторов — простота обучения и простота программирования.

Скорость программ зависит не только от нас, но и от того, насколько быстро работает интерпретатор. Мы знаем, что программисты Google постоянно улучшают интерпретатор JavaScript, который работает в браузере Chrome. Если вы написали программу на JavaScript, с каждой новой версией Chrome она работает быстрее, даже если вы ничего в ней не улучшаете.

Но в целом интерпретируемые программы работают медленнее, чем программы в машинных кодах. Это происходит потому, что интерпретатор должен сначала проанализировать текст команды, и лишь потом её выполнить. Программа же в машинных кодах сразу понятна компьютеру. Низкая по сравнению с машинными кодами скорость работы — первый недостаток интерпретаторов.

Программе в машинных кодах ничего не нужно для запуска, а вот интерпретируемой программе нужен интерпретатор. В Windows программы в машинных кодах имеют расширение *.exe*. Программу в машинных кодах, скажем, архиватор 7-zip можно просто запустить. А вот для того, чтобы выполнить программу на языке Python, нужен интерпретатор *python*. Это второй недостаток интерпретаторов.

В машинных кодах очень сложно разбираться. Это помогает разработчиком скрывать важные детали реализации. Исходный код на интерпретируемом языке доступен пользователю программы. Он может подсмотреть в программе то, что её автор хотел бы спрятать, например, способ шифрования пароля или уникальный алгоритм. И это — третий недостаток интерпретаторов.

## Выводы и рекомендации

Интерпретатор — это программа, которая понимает и выполняет команды, написанные на языке программирования.

Он нужен, потому что компьютер умеет выполнять только программы в машинных кодах, но писать такие программы очень трудно.

Интерпретаторы умеют работать в интерактивном режиме, выполняя команды программиста по одной. Такой способ работы называют *Read-Evaluate-Print Loop* или, сокращённо, REPL.

Благодаря REPL интерпретируемые языки прекрасно подходят для обучения программированию, и для прототипирования новых программ.

Интерпретатор состоит из анализатора текста и исполнителей отдельных команд языка, таких как цикл `for`, проверка `if`, вызов функции `print` и других.

К достоинствам интерпретаторов относят лёгкость изучения и скорость разработки.

К недостаткам — невысокую скорость работы программ, необходимость вместе с программой распространять также и сам интерпретатор, а также открытость исходных кодов программ.
